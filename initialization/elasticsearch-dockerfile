# Use Elasticsearch official image as base
FROM docker.elastic.co/elasticsearch/elasticsearch:7.10.0

# Install required plugin for MongoDB river (you might need to adjust for the correct version)
RUN elasticsearch-plugin install --batch repository-mongodb

# Copy custom Elasticsearch configuration if needed
# COPY elasticsearch.yml /usr/share/elasticsearch/config/elasticsearch.yml

# Expose ports
EXPOSE 9200 9300

# # Copy the script to import data into the container
# COPY import-data.sh /usr/share/elasticsearch/import-data.sh

# # Grant execute permissions to the script
# RUN chmod +x /usr/share/elasticsearch/import-data.sh

# # Run the script on container startup
# CMD ["/bin/bash", "-c", "/usr/share/elasticsearch/import-data.sh && exec /usr/local/bin/docker-entrypoint.sh"]
